{"version":3,"sources":["HorizontalBarChart.js","StackedBarChart.js","data/LoadData.js","MaterialList.js","App.js","serviceWorker.js","index.js","css/StackedBarChart.module.scss","css/App.module.scss","data/gwp.csv","data/allimpacts.csv"],"names":["valueData","d","frequency","width","height","data","horizontalMax","horizontalScale","scaleLinear","rangeRound","domain","Math","max","map","GradientTealBlue","id","fill","rx","Group","top","i","letter","categoryData","barWidth","barY","Bar","key","x","y","onClick","event","alert","JSON","stringify","Object","values","withTooltip","barHeight","selectedMaterials","allMaterials","xAxisLabel","events","margin","left","right","bottom","tooltipOpen","tooltipLeft","tooltipTop","tooltipData","hideTooltip","showTooltip","selectedMaterialsGroupedByType","d3","type","entries","console","log","tooltipTimeout","keys","filter","allMaterialTotals","reduce","ret","cur","t","dailyTotal","k","push","material","xScale","nice","color","scaleOrdinal","range","ParentSize","w","xMax","previousY","className","styles","container","style","position","sm","yMax","length","yScale","scaleBand","padding","yOffset","BarStackHorizontal","barStacks","barStack","bars","bar","index","onMouseLeave","setTimeout","onMouseMove","clearTimeout","AxisLeft","hideAxisLine","hideTicks","scale","stroke","tickStroke","tickLabelProps","value","fontSize","textAnchor","dy","AxisBottom","label","labelProps","display","justifyContent","direction","labelMargin","Tooltip","minWidth","backgroundColor","tooltipContainer","PAPAPARSE_CONFIG","download","header","skipEmptyLines","cb","Papa","parse","dataAllImpacts","complete","results","file","Array","isArray","resultData","impact1","parseFloat","impact2","impact3","error","errors","dataGWP","Variable","Attended","MaterialList","props","initialSelectedMaterials","state","items","materials","selectedItems","listEl","handleSelectItem","bind","e","target","nextValue","this","getNextValue","setState","updateSelectedMaterials","includes","item","onChange","checked","htmlFor","handleSelectAll","ref","node","renderItems","PureComponent","App","chartType","allImpactsData","gwpData","handleInputChange","LoadData","name","newSelectedMaterials","allImpactsDataSelectedMaterialsOnly","topcontrols","inputgroup","inputitem","for","sidebar","chartContainer","StackedBarChart","HorizontalBarChart","Component","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","module","exports"],"mappings":"mRAQMA,EAAY,SAAAC,GAAC,OAAmB,KAAdA,EAAEC,WAEX,cAA8B,IAA3BC,EAA0B,EAA1BA,MAAOC,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,KAGzBC,EAAgBH,EAAQ,IAGxBI,EAAkBC,YAAY,CAClCC,WAAY,CAACH,EAAe,GAC5BI,OAAQ,CAAC,EAAGC,KAAKC,IAAL,MAAAD,KAAI,YAAQN,EAAKQ,IAAIb,QAGnC,OACE,yBAAKG,MAAOA,EAAOC,OAAQA,GACzB,kBAACU,EAAA,EAAD,CAAkBC,GAAG,SACrB,0BAAMZ,MAAOA,EAAOC,OAAQA,EAAQY,KAAM,aAAcC,GAAI,KAC5D,kBAACC,EAAA,EAAD,CAAOC,IAAK,IACTd,EAAKQ,KAAI,SAACZ,EAAGmB,GACZ,IAAMC,EApBK,SAAApB,GAAC,OAAIA,EAAEoB,OAoBHC,CAAarB,GAEtBsB,EAAWjB,EAAgBC,EAAgBP,EAAUC,IACrDuB,EAAO,GAAkBJ,EAE/B,OACE,kBAACK,EAAA,EAAD,CACEC,IAAG,cAASL,GACZM,EAvBc,GAwBdC,EAAGJ,EACHrB,MAAOoB,EACPnB,OAVc,GAWdY,KAAK,yBACLa,QAAS,SAAAC,GACPC,MAAM,YAAD,OAAaC,KAAKC,UAAUC,OAAOC,OAAOlC,e,0GC9BhDmC,eAAY,YAkBpB,IAjBLC,EAiBI,EAjBJA,UACAC,EAgBI,EAhBJA,kBACAC,EAeI,EAfJA,aACAC,EAcI,EAdJA,WAcI,IAbJC,cAaI,aAZJC,cAYI,MAZK,CACPvB,IAAK,GACLwB,KAAM,IACNC,MAAO,GACPC,OAAQ,KAQN,EANJC,EAMI,EANJA,YACAC,EAKI,EALJA,YACAC,EAII,EAJJA,WACAC,EAGI,EAHJA,YACAC,EAEI,EAFJA,YACAC,EACI,EADJA,YAGMC,EAAiCC,MACtC3B,KAAI,SAASzB,GAAK,OAAOA,EAAEqD,QAC3BC,QAAQjB,GACTkB,QAAQC,IAAIL,GAIZ,IAoCIM,EA3BEC,EAAOzB,OAAOyB,KAAKrB,EAAkB,IAAIsB,QAAO,SAAA3D,GAAC,MAAU,aAANA,GAA0B,SAANA,KAEzE4D,EAAoBtB,EAAauB,QAAO,SAACC,EAAKC,GAClD,IAAMC,EAAIN,EAAKG,QAAO,SAACI,EAAYC,GAEjC,OADAD,IAAgBF,EAAIG,KAEnB,GAEH,OADAJ,EAAIK,KAAKH,GACFF,IACN,IAGGnC,EAAI,SAAA3B,GAAC,OAAIA,EAAEoE,UAGXC,EAAS9D,YAAY,CACzBE,OAAQ,CACN,EACAC,KAAKC,IAAL,MAAAD,KAAI,YAAQkD,KAEdU,MAAM,IAEFC,EAAQC,YAAa,CACzB/D,OAAQiD,EACRe,MAAO,CA7BO,UACA,UACA,aAkChB,OAAQ,kBAACC,EAAA,EAAD,MAEJ,YAAiB,IAARC,EAAO,EAAdzE,MACM0E,EAAOD,EAAIlC,EAAOC,KAAOD,EAAOE,MACtC0B,EAAO7D,WAAW,CAAC,EAAGoE,IAEtB,IAAIC,EAAY,EAEhB,OAAQ,yBAAKC,UAAWC,IAAOC,UAAWC,MAAO,CAC7CC,SAAU,aAGZ,yBAAKhF,MAAOyE,EAAGxE,OAAQ,KACrB,0BAAMD,MAAOyE,EAAGxE,OAAQ,IAAKY,KA9C5B,UA8CsCC,GAAI,KAC3C,kBAACC,EAAA,EAAD,CAAOC,IAAKuB,EAAOvB,IAAKwB,KAAMD,EAAOC,MAClCS,EAA+BvC,KAAI,SAAAuE,GAClC,IACMC,EAzDO,IAwDwBhD,EAAY+C,EAAGjD,OAAOmD,OACrC5C,EAAOvB,IAAMuB,EAAOG,OACpC0C,EAASC,YAAU,CAAC9E,OAAS0E,EAAGjD,OAAOtB,IAAIe,GAAI6D,QAAS,KAC9DF,EAAO9E,WAAW,CAAC4E,EAAM,IACzB,IAAMK,EAAUZ,EAGhB,OAFAA,GAAaO,EAGX,kBAACnE,EAAA,EAAD,CAAOC,IAAKuE,GACV,8BAAON,EAAG1D,KACV,kBAACiE,EAAA,EAAD,CAAoBtF,KAAM+E,EAAGjD,OAAQwB,KAAMA,EAAMvD,OAAQiF,EAAMzD,EAAGA,EAAG0C,OAAQA,EAAQiB,OAAQA,EAAQf,MAAOA,IAE1G,SAAAoB,GACE,OAAOA,EAAU/E,KAAI,SAAAgF,GACnB,OAAOA,EAASC,KAAKjF,KAAI,SAAAkF,GACvB,OAAQ,0BAAMrE,IAAG,8BAAyBmE,EAASG,MAAlC,YAA2CD,EAAIC,OAASrE,EAAGoE,EAAIpE,EAAGC,EAAGmE,EAAInE,EAAGzB,MAAO4F,EAAI5F,MAAOC,OAAQ2F,EAAI3F,OAAQY,KAAM+E,EAAIvB,MAAO3C,QAAS,SAAAC,GACpJW,GAELV,MAAM,YAAD,OAAaC,KAAKC,UAAU8D,MAChCE,aAAc,SAAAnE,GACf4B,EAAiBwC,YAAW,WAC1BhD,MACC,MACFiD,YAAa,SAAArE,GACV4B,GACF0C,aAAa1C,GACf,IAAMvC,EAAM4E,EAAInE,EAAIc,EAAOvB,IACrBwB,EAAOoD,EAAIpE,EAAIoE,EAAI5F,MAAQuC,EAAOC,KACxCQ,EAAY,CAACF,YAAa8C,EAAK/C,WAAY7B,EAAK4B,YAAaJ,gBAO3E,kBAAC0D,EAAA,EAAD,CAAUC,cAAc,EAAMC,WAAW,EAAMC,MAAOjB,EAEpDkB,OAvFF,UAuFmBC,WAvFnB,UAuFwCC,eAAgB,SAACC,EAAOZ,GAAR,MAAmB,CAAChF,KAvF5E,UAuF2F6F,SAAU,GAAIC,WAAY,MAAOC,GAAI,iBAKpI,kBAACC,EAAA,EAAD,CAAY7F,IAAK,IAAKqF,MAAOlC,EAAQmC,OA5FjC,UA4FkDC,WA5FlD,UA4FuEJ,cAAc,EAAMC,WAAW,EAAMU,MAAOzE,EAAYmE,eAAgB,SAACC,EAAOZ,GAAR,MAAmB,CAAChF,KA5FnK,UA4FkL6F,SAAU,GAAIC,WAAY,WAAYI,WAAY,CACpOL,SAAU,GACV7F,KA9FA,eAkGR,yBAAKkE,MAAO,CACRC,SAAU,WACVhE,IAAKuB,EAAOvB,IAAM,EAAI,GACtBhB,MAAO,OACPgH,QAAS,OACTC,eAAgB,SAChBP,SAAU,SAEZ,kBAAC,IAAD,CAAeL,MAAOhC,EAAO6C,UAAU,MAAMC,YAAY,gBAGzDxE,GAAgB,kBAACyE,EAAA,EAAD,CAASpG,IAAK6B,EAAYL,KAAMI,EAAamC,MAAO,CAChEsC,SAAU,GACVC,gBAAiB,kBACjBjD,MAAO,UAET,yBAAKO,UAAWC,IAAO0C,kBACrB,yBAAKxC,MAAO,CACRV,MAAOA,EAAMvB,EAAYvB,OAE3B,gCAASuB,EAAYvB,MAEvB,6BAAMuB,EAAY8C,IAAI1F,KAAK4C,EAAYvB,MACvC,6BACE,+BAAQE,EAAEqB,EAAY8C,IAAI1F,iB,2DClKtCsH,EAAmB,CACvBC,UAAU,EACVC,QAAQ,EACRC,gBAAgB,GAGH,EACG,SAACC,GACfC,IAAKC,MAAMC,IAAX,eACKP,EADL,CAEEQ,SAAU,SAASC,EAASC,GAC3B,GAAGC,MAAMC,QAAQH,EAAQ/H,MAAO,CAC9B,IAAMmI,EAAaJ,EAAQ/H,KAAKQ,KAAI,SAAAZ,GAClC,MAAO,CAAEoE,SAAUpE,EAAEoE,SAAUf,KAAMrD,EAAEqD,KAAMmF,QAASC,WAAWzI,EAAEwI,SAAUE,QAASD,WAAWzI,EAAE0I,SAAUC,QAASF,WAAWzI,EAAE2I,aAErIb,EAAGS,QAEHhF,QAAQqF,MAAM,4BAA6BT,EAAQU,aAX7C,EAiBJ,SAACf,GACRC,IAAKC,MAAMc,IAAX,eACKpB,EADL,CAEEQ,SAAU,SAASC,EAASC,GAC3B,GAAGC,MAAMC,QAAQH,EAAQ/H,MAAO,CAC9B,IAAMmI,EAAaJ,EAAQ/H,KAAKQ,KAAI,SAAAZ,GAClC,MAAO,CAAEoB,OAAQpB,EAAE+I,SAAU9I,UAAWwI,WAAWzI,EAAEgJ,cAEvDlB,EAAGS,QAEHhF,QAAQqF,MAAM,4BAA6BT,EAAQU,a,iBCjCvCI,E,YACnB,WAAYC,GAAQ,IAAD,6BACjB,4CAAMA,IAEN3F,QAAQC,IAAI0F,EAAMC,0BAElB,EAAKC,MAAQ,CACXC,MAAOH,EAAMI,UAAU1I,KAAI,SAAAwD,GAAc,MAAO,CAAE4C,MAAO5C,EAAUtD,GAAIsD,MACvEmF,cAAeL,EAAMC,0BAGvB,EAAKK,OAAS,KACd,EAAKC,iBAAmB,EAAKA,iBAAiBC,KAAtB,gBAXP,E,8EAcFC,GAAI,IACXhD,EAAUgD,EAAEC,OAAZjD,MACFkD,EAAYC,KAAKC,aAAapD,GAEpCmD,KAAKE,SAAS,CAAET,cAAeM,IAC/BC,KAAKZ,MAAMe,wBAAwBJ,K,sCAGrBF,GACdG,KAAKE,SAAS,CAAET,cAAeO,KAAKZ,MAAMI,YAC1CQ,KAAKZ,MAAMe,wBAAwBH,KAAKZ,MAAMI,a,mCAGnC3C,GAAQ,IACX4C,EAAkBO,KAAKV,MAAvBG,cAGR,OAAOA,EAAcW,SAASvD,GAC1B4C,EAAc5F,QAAO,SAAAwG,GAAI,OAAIA,IAASxD,KADnC,sBAEC4C,GAFD,CAEgB5C,M,oCAGV,IAAD,SACqBmD,KAAKV,MAA9BC,EADI,EACJA,MAAOE,EADH,EACGA,cACf,OAAOF,EAAMzI,KAAI,SAAAuJ,GAAS,IAChBrJ,EAAcqJ,EAAdrJ,GAAIkG,EAAUmD,EAAVnD,MACZ,OACE,wBAAIvF,IAAKX,GACP,2BACEsJ,SAAU,EAAKX,iBACfpG,KAAK,WACLgH,QAASd,EAAcW,SAASpJ,GAChC6F,MAAO7F,EACPA,GAAE,eAAUA,KAEd,2BAAOwJ,QAAO,eAAUxJ,IAAOkG,S,+BAM7B,IAAD,OACP,OACE,yBAAKlC,UAAWC,IAAOC,WACrB,4BAAQpD,QAAS,SAAA+H,GAAC,OAAI,EAAKY,gBAAgBb,KAAK,EAA1B,CAAgCC,KAAtD,cACA,wBAAIa,IAAK,SAAAC,GAAI,OAAK,EAAKjB,OAASiB,IAAQX,KAAKY,oB,GA5DXC,iB,yBC2I3BC,E,YAtIb,WAAY1B,GAAQ,IAAD,8BACjB,4CAAMA,KACDE,MAAQ,CACXyB,UAAW,aACXC,eAAgB,GAChBC,QAAS,GACTzB,UAAW,GACXjH,kBAAmB,IAGrB,EAAK2I,kBAAoB,EAAKA,kBAAkBtB,KAAvB,gBAVR,E,iFAaE,IAAD,OAClBuB,GAAwB,SAAA7K,GACtB,IAAMkJ,EAAYlJ,EAAKQ,KAAI,SAAAZ,GAAC,OAAIA,EAAEoE,YAClC,EAAK4F,SAAS,CACZc,eAAgB1K,EAChBkJ,UAAWA,EACXjH,kBAAmBiH,OAGvB2B,GAAiB,SAAA7K,GAAI,OAAI,EAAK4J,SAAS,CAAEe,QAAS3K,S,wCAGlCyB,GAAQ,IAAD,OACjB+H,EAAS/H,EAAM+H,OACfjD,EAAwB,aAAhBiD,EAAOvG,KAAsBuG,EAAOS,QAAUT,EAAOjD,MAC7DuE,EAAOtB,EAAOsB,KAEpBpB,KAAKE,SAAL,eACGkB,EAAOvE,IACP,WACDpD,QAAQC,IAAI,cAAe,EAAK4F,Y,8CAIZ+B,GACtBrB,KAAKE,SAAS,CACZ3H,kBAAmB8I,M,+BAIb,IAAD,OACDC,EAAsCtB,KAAKV,MAAM0B,eAAenH,QAAO,SAAA3D,GAAC,OAAI,EAAKoJ,MAAM/G,kBAAkB6H,SAASlK,EAAEoE,aAE1H,OACE,yBAAKU,UAAU,OACX,8BACE,yBAAKA,UAAWC,IAAOsG,aACrB,yBAAKvG,UAAWC,IAAOuG,YACrB,0CACE,yBAAKxG,UAAWC,IAAOwG,WACrB,2BAAOlI,KAAK,QAAQvC,GAAG,aAAaoK,KAAK,YAAYvE,MAAM,aAAa0D,QAAkC,eAAzBP,KAAKV,MAAMyB,UAA4BT,SAAUN,KAAKkB,oBACvI,2BAAOV,QAAQ,cAAf,gBAEF,yBAAKxF,UAAWC,IAAOwG,WACrB,2BAAOlI,KAAK,QAAQvC,GAAG,MAAM6F,MAAM,MAAMuE,KAAK,YAAYb,QAAkC,QAAzBP,KAAKV,MAAMyB,UAAqBT,SAAUN,KAAKkB,oBAClH,2BAAOQ,IAAI,QAAX,6BAEF,yBAAK1G,UAAWC,IAAOwG,WACrB,2BAAOlI,KAAK,QAAQvC,GAAG,MAAM6F,MAAM,MAAMuE,KAAK,YAAYb,QAAkC,QAAzBP,KAAKV,MAAMyB,UAAqBT,SAAUN,KAAKkB,oBAClH,2BAAOQ,IAAI,OAAX,qBAEF,yBAAK1G,UAAWC,IAAOwG,WACrB,2BAAOlI,KAAK,QAAQvC,GAAG,KAAK6F,MAAM,KAAKuE,KAAK,YAAYb,QAAkC,OAAzBP,KAAKV,MAAMyB,UAAoBT,SAAUN,KAAKkB,oBAC/G,2BAAOQ,IAAI,MAAX,wBAIN,yBAAK1G,UAAWC,IAAOuG,YACrB,wCACA,yBAAKxG,UAAWC,IAAOwG,WACrB,2BAAOlI,KAAK,QAAQvC,GAAG,OAAOoK,KAAK,WAAWvE,MAAM,OAAO0D,QAAQ,YACnE,2BAAOmB,IAAI,QAAX,wBAEF,yBAAK1G,UAAWC,IAAOwG,WACrB,2BAAOlI,KAAK,QAAQvC,GAAG,SAASoK,KAAK,WAAWvE,MAAM,WACtD,2BAAO6E,IAAI,UAAX,yBAEF,yBAAK1G,UAAWC,IAAOwG,WACrB,2BAAOlI,KAAK,QAAQvC,GAAG,SAASoK,KAAK,WAAWvE,MAAM,WACtD,2BAAO6E,IAAI,UAAX,wBAIJ,yBAAK1G,UAAWC,IAAOuG,YACrB,+CACA,yBAAKxG,UAAWC,IAAOwG,WACrB,2BAAOlI,KAAK,QAAQvC,GAAG,OAAOoK,KAAK,iBAAiBvE,MAAM,OAAO0D,QAAQ,YACzE,2BAAOmB,IAAI,QAAX,yBAEF,yBAAK1G,UAAWC,IAAOwG,WACrB,2BAAOlI,KAAK,QAAQvC,GAAG,OAAOoK,KAAK,iBAAiBvE,MAAM,SAC1D,2BAAO6E,IAAI,QAAX,yBAKL1B,KAAKV,MAAME,UAAUjE,OAAS,GAC7B,yBAAKP,UAAWC,IAAO0G,SACrB,kBAAC,EAAD,CACEnC,UAAWQ,KAAKV,MAAME,UACtBW,wBAAyBH,KAAKG,wBAAwBP,KAAKI,MAC3DX,yBAA0BW,KAAKV,MAAM/G,sBAO/C,yBAAKyC,UAAWC,IAAO2G,gBACG,eAAzB5B,KAAKV,MAAMyB,WAA8BO,EAAoC/F,OAAS,GAAK,kBAACsG,EAAD,CAC1FtJ,kBAAmB+I,EACnB9I,aAAcwH,KAAKV,MAAM0B,eACzB1I,UAAW,GACXG,WAAW,gBAGa,QAAzBuH,KAAKV,MAAMyB,WAAuBf,KAAKV,MAAM2B,QAAQ1F,OAAS,GAAK,kBAACuG,EAAD,CAClExL,KAAM0J,KAAKV,MAAM2B,QACjB5K,OAAQ,IACRoC,WAAW,mB,GA3HHsJ,aCIEC,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCbNC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,SD8H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,iB,mBEpInBC,EAAOC,QAAU,CAAC,UAAY,mCAAmC,iBAAmB,4C,kBCApFD,EAAOC,QAAU,CAAC,YAAc,yBAAyB,WAAa,wBAAwB,UAAY,uBAAuB,QAAU,qBAAqB,eAAiB,8B,mBCDjLD,EAAOC,QAAU,IAA0B,iC,mBCA3CD,EAAOC,QAAU,IAA0B,wC","file":"static/js/main.bfb91d5c.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Bar } from '@vx/shape';\r\nimport { Group } from '@vx/group';\r\nimport { GradientTealBlue } from '@vx/gradient';\r\nimport { scaleLinear } from '@vx/scale';\r\n\r\n// accessors\r\nconst categoryData = d => d.letter;\r\nconst valueData = d => +d.frequency * 100;\r\n\r\nexport default ({ width, height, data }) => {\r\n  // bounds\r\n  const horizontalPadding = 60;\r\n  const horizontalMax = width - 2*horizontalPadding;\r\n\r\n  // scales\r\n  const horizontalScale = scaleLinear({\r\n    rangeRound: [horizontalMax, 0],\r\n    domain: [0, Math.max(...data.map(valueData))]\r\n  });\r\n\r\n  return (\r\n    <svg width={width} height={height}>\r\n      <GradientTealBlue id=\"teal\" />\r\n      <rect width={width} height={height} fill={\"url(#teal)\"} rx={14} />\r\n      <Group top={40}>\r\n        {data.map((d, i) => {\r\n          const letter = categoryData(d);\r\n          const barHeight = 20;\r\n          const barWidth = horizontalMax - horizontalScale(valueData(d));\r\n          const barY = (barHeight + 5) * i;\r\n          const barX = horizontalPadding;\r\n          return (\r\n            <Bar\r\n              key={`bar-${letter}`}\r\n              x={barX}\r\n              y={barY}\r\n              width={barWidth}\r\n              height={barHeight}\r\n              fill=\"rgba(23, 233, 217, .5)\"\r\n              onClick={event => {\r\n                alert(`clicked: ${JSON.stringify(Object.values(d))}`);\r\n              }}\r\n            />\r\n          );\r\n        })}\r\n      </Group>\r\n    </svg>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport {BarStackHorizontal} from '@vx/shape';\r\nimport {Group} from '@vx/group';\r\nimport {AxisBottom, AxisLeft} from '@vx/axis';\r\nimport {scaleBand, scaleLinear, scaleOrdinal} from '@vx/scale';\r\nimport {withTooltip, Tooltip} from '@vx/tooltip';\r\nimport {LegendOrdinal} from '@vx/legend';\r\nimport {ParentSize} from '@vx/responsive';\r\nimport * as d3 from 'd3';\r\nimport styles from './css/StackedBarChart.module.scss';\r\n\r\nexport default withTooltip(({\r\n  barHeight,\r\n  selectedMaterials,\r\n  allMaterials,\r\n  xAxisLabel,\r\n  events = false,\r\n  margin = {\r\n    top: 40,\r\n    left: 100,\r\n    right: 40,\r\n    bottom: 100\r\n  },\r\n  tooltipOpen,\r\n  tooltipLeft,\r\n  tooltipTop,\r\n  tooltipData,\r\n  hideTooltip,\r\n  showTooltip\r\n}) => {\r\n\r\n  const selectedMaterialsGroupedByType = d3.nest()\r\n  .key(function(d) { return d.type })\r\n  .entries(selectedMaterials);\r\n  console.log(selectedMaterialsGroupedByType);\r\n\r\n  // bounds\r\n  // const xMax = width - margin.left - margin.right;\r\n  const headerFooterHeight = 160;\r\n  // const height = headerFooterHeight + (barHeight * selectedMaterials.length);\r\n  // const yMax = height - margin.top - margin.bottom;\r\n\r\n  const purple1 = '#6c5efb';\r\n  const purple2 = '#c998ff';\r\n  const purple3 = '#a44afe';\r\n  const bg = '#eaedff';\r\n\r\n  const keys = Object.keys(selectedMaterials[0]).filter(d => d !== 'material' && d !== 'type');\r\n\r\n  const allMaterialTotals = allMaterials.reduce((ret, cur) => {\r\n    const t = keys.reduce((dailyTotal, k) => {\r\n      dailyTotal += + cur[k];\r\n      return dailyTotal;\r\n    }, 0);\r\n    ret.push(t);\r\n    return ret;\r\n  }, []);\r\n\r\n  // accessors\r\n  const y = d => d.material;\r\n\r\n  // scales\r\n  const xScale = scaleLinear({\r\n    domain: [\r\n      0,\r\n      Math.max(...allMaterialTotals)\r\n    ],\r\n    nice: true\r\n  });\r\n  const color = scaleOrdinal({\r\n    domain: keys,\r\n    range: [purple1, purple2, purple3]\r\n  });\r\n\r\n  let tooltipTimeout;\r\n\r\n\r\n\r\n  return (<ParentSize>\r\n    {\r\n      ({width: w}) => {\r\n        const xMax = w - margin.left - margin.right;\r\n        xScale.rangeRound([0, xMax]);\r\n        // w = w- 100;\r\n        var previousY = 0;\r\n\r\n        return (<div className={styles.container} style={{\r\n            position: 'relative'\r\n          }}>\r\n\r\n          <svg width={w} height={800}>\r\n            <rect width={w} height={800} fill={bg} rx={14}/>\r\n            <Group top={margin.top} left={margin.left}>\r\n              {selectedMaterialsGroupedByType.map(sm => {\r\n                const height = headerFooterHeight + (barHeight * sm.values.length);\r\n                const yMax = height - margin.top - margin.bottom;\r\n                const yScale = scaleBand({domain:  sm.values.map(y), padding: 0.2});\r\n                yScale.rangeRound([yMax, 0]);\r\n                const yOffset = previousY;\r\n                previousY += yMax;\r\n\r\n                return (\r\n                  <Group top={yOffset}>\r\n                    <text>{sm.key}</text>\r\n                    <BarStackHorizontal data={sm.values} keys={keys} height={yMax} y={y} xScale={xScale} yScale={yScale} color={color}>\r\n                    {\r\n                      barStacks => {\r\n                        return barStacks.map(barStack => {\r\n                          return barStack.bars.map(bar => {\r\n                            return (<rect key={`barstack-horizontal-${barStack.index}-${bar.index}`} x={bar.x} y={bar.y} width={bar.width} height={bar.height} fill={bar.color} onClick={event => {\r\n                                if (!events)\r\n                                  return;\r\n                                alert(`clicked: ${JSON.stringify(bar)}`);\r\n                              }} onMouseLeave={event => {\r\n                                tooltipTimeout = setTimeout(() => {\r\n                                  hideTooltip();\r\n                                }, 300);\r\n                              }} onMouseMove={event => {\r\n                                if (tooltipTimeout)\r\n                                  clearTimeout(tooltipTimeout);\r\n                                const top = bar.y + margin.top;\r\n                                const left = bar.x + bar.width + margin.left;\r\n                                showTooltip({tooltipData: bar, tooltipTop: top, tooltipLeft: left});\r\n                              }}/>);\r\n                          });\r\n                        });\r\n                      }\r\n                    }\r\n                  </BarStackHorizontal>\r\n                  <AxisLeft hideAxisLine={true} hideTicks={true} scale={yScale} /* tickFormat={formatDate} */\r\n\r\n                    stroke={purple3} tickStroke={purple3} tickLabelProps={(value, index) => ({fill: purple3, fontSize: 11, textAnchor: 'end', dy: '0.33em'})}/>\r\n                </Group>\r\n                )\r\n              })}\r\n\r\n              <AxisBottom top={700} scale={xScale} stroke={purple3} tickStroke={purple3} hideAxisLine={true} hideTicks={true} label={xAxisLabel} tickLabelProps={(value, index) => ({fill: purple3, fontSize: 11, textAnchor: 'middle'})} labelProps={{\r\n                  fontSize: 18,\r\n                  fill: purple3\r\n                }}/>\r\n            </Group>\r\n          </svg>\r\n          <div style={{\r\n              position: 'absolute',\r\n              top: margin.top / 2 - 10,\r\n              width: '100%',\r\n              display: 'flex',\r\n              justifyContent: 'center',\r\n              fontSize: '14px'\r\n            }}>\r\n            <LegendOrdinal scale={color} direction=\"row\" labelMargin=\"0 15px 0 0\"/>\r\n          </div>\r\n          {\r\n            tooltipOpen && (<Tooltip top={tooltipTop} left={tooltipLeft} style={{\r\n                minWidth: 60,\r\n                backgroundColor: 'rgba(0,0,0,0.9)',\r\n                color: 'white'\r\n              }}>\r\n              <div className={styles.tooltipContainer}>\r\n                <div style={{\r\n                    color: color(tooltipData.key)\r\n                  }}>\r\n                  <strong>{tooltipData.key}</strong>\r\n                </div>\r\n                <div>{tooltipData.bar.data[tooltipData.key]}</div>\r\n                <div>\r\n                  <small>{y(tooltipData.bar.data)}</small>\r\n                </div>\r\n              </div>\r\n            </Tooltip>)\r\n          }\r\n        </div>);\r\n      }\r\n    }\r\n  </ParentSize>);\r\n\r\n});\r\n","import Papa from 'papaparse';\r\nimport dataGWP from './gwp.csv';\r\nimport dataAllImpacts from './allimpacts.csv';\r\n\r\nconst PAPAPARSE_CONFIG = {\r\n  download: true,\r\n  header: true,\r\n  skipEmptyLines: true\r\n};\r\n\r\nexport default {\r\n  allImpactsData: (cb) => {\r\n    Papa.parse(dataAllImpacts, {\r\n      ...PAPAPARSE_CONFIG,\r\n      complete: function(results, file) {\r\n       if(Array.isArray(results.data)) {\r\n         const resultData = results.data.map(d => {\r\n           return { material: d.material, type: d.type, impact1: parseFloat(d.impact1), impact2: parseFloat(d.impact2), impact3: parseFloat(d.impact3) }\r\n         });\r\n         cb(resultData);\r\n       } else {\r\n         console.error('error trying to load file', results.errors);\r\n       }\r\n     }\r\n    });\r\n  },\r\n\r\n  gwpData: (cb) => {\r\n    Papa.parse(dataGWP, {\r\n      ...PAPAPARSE_CONFIG,\r\n      complete: function(results, file) {\r\n       if(Array.isArray(results.data)) {\r\n         const resultData = results.data.map(d => {\r\n           return { letter: d.Variable, frequency: parseFloat(d.Attended) }\r\n         });\r\n         cb(resultData);\r\n       } else {\r\n         console.error('error trying to load file', results.errors);\r\n       }\r\n     }\r\n    });\r\n  }\r\n};\r\n","/* https://codesandbox.io/s/multiselect-checkboxes-oennn */\r\nimport React, { PureComponent } from \"react\";\r\nimport styles from './css/MaterialList.module.scss';\r\n\r\nexport default class MaterialList extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    console.log(props.initialSelectedMaterials);\r\n\r\n    this.state = {\r\n      items: props.materials.map(material => { return { label: material, id: material }}),\r\n      selectedItems: props.initialSelectedMaterials\r\n    };\r\n\r\n    this.listEl = null;\r\n    this.handleSelectItem = this.handleSelectItem.bind(this);\r\n  }\r\n\r\n  handleSelectItem(e) {\r\n    const { value } = e.target;\r\n    const nextValue = this.getNextValue(value);\r\n\r\n    this.setState({ selectedItems: nextValue });\r\n    this.props.updateSelectedMaterials(nextValue);\r\n  }\r\n\r\n  handleSelectAll(e) {\r\n    this.setState({ selectedItems: this.props.materials });\r\n    this.props.updateSelectedMaterials(this.props.materials);\r\n  }\r\n\r\n  getNextValue(value) {\r\n    const { selectedItems } = this.state;\r\n\r\n    // if it's already in there, remove it, otherwise append it\r\n    return selectedItems.includes(value)\r\n      ? selectedItems.filter(item => item !== value)\r\n      : [...selectedItems, value];\r\n  }\r\n\r\n  renderItems() {\r\n    const { items, selectedItems } = this.state;\r\n    return items.map(item => {\r\n      const { id, label } = item;\r\n      return (\r\n        <li key={id}>\r\n          <input\r\n            onChange={this.handleSelectItem}\r\n            type=\"checkbox\"\r\n            checked={selectedItems.includes(id)}\r\n            value={id}\r\n            id={`item-${id}`}\r\n          />\r\n          <label htmlFor={`item-${id}`}>{label}</label>\r\n        </li>\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={styles.container}>\r\n        <button onClick={e => this.handleSelectAll.bind(this)(e)}>Select All</button>\r\n        <ul ref={node => (this.listEl = node)}>{this.renderItems()}</ul>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react';\nimport HorizontalBarChart from './HorizontalBarChart';\nimport StackedBarChart from './StackedBarChart';\nimport LoadData from './data/LoadData';\nimport MaterialList from './MaterialList';\nimport './css/Main.scss';\nimport styles from './css/App.module.scss';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      chartType: \"allImpacts\",\n      allImpactsData: [],\n      gwpData: [],\n      materials: [],\n      selectedMaterials: []\n    };\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n  }\n\n  componentDidMount() {\n    LoadData.allImpactsData(data => {\n      const materials = data.map(d => d.material);\n      this.setState({\n        allImpactsData: data,\n        materials: materials,\n        selectedMaterials: materials\n      });\n    });\n    LoadData.gwpData(data => this.setState({ gwpData: data }));\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    const name = target.name;\n\n    this.setState({\n      [name]: value\n    }, () => {\n      console.log('new state: ', this.state);\n    });\n  }\n\n  updateSelectedMaterials(newSelectedMaterials) {\n    this.setState({\n      selectedMaterials: newSelectedMaterials\n    })\n  }\n\n  render() {\n    const allImpactsDataSelectedMaterialsOnly = this.state.allImpactsData.filter(d => this.state.selectedMaterials.includes(d.material));\n\n    return (\n      <div className=\"App\">\n          <form>\n            <div className={styles.topcontrols}>\n              <div className={styles.inputgroup}>\n                <h3>CHART TYPE</h3>\n                  <div className={styles.inputitem}>\n                    <input type=\"radio\" id=\"allImpacts\" name=\"chartType\" value=\"allImpacts\" checked={this.state.chartType === \"allImpacts\"} onChange={this.handleInputChange} />\n                    <label htmlFor=\"allImpacts\">All Impacts</label>\n                  </div>\n                  <div className={styles.inputitem}>\n                    <input type=\"radio\" id=\"GWP\" value=\"GWP\" name=\"chartType\" checked={this.state.chartType === \"GWP\"} onChange={this.handleInputChange} />\n                    <label for=\"fGWP\">Global Warming Potential</label>\n                  </div>\n                  <div className={styles.inputitem}>\n                    <input type=\"radio\" id=\"LCS\" value=\"LCS\" name=\"chartType\" checked={this.state.chartType === \"LCS\"} onChange={this.handleInputChange} />\n                    <label for=\"LCS\">Life Cycle Stage</label>\n                  </div>\n                  <div className={styles.inputitem}>\n                    <input type=\"radio\" id=\"MB\" value=\"MB\" name=\"chartType\" checked={this.state.chartType === \"MB\"} onChange={this.handleInputChange} />\n                    <label for=\"MB\">Material Breakdown</label>\n                  </div>\n              </div>\n\n              <div className={styles.inputgroup}>\n                <h3>LIFESPAN</h3>\n                <div className={styles.inputitem}>\n                  <input type=\"radio\" id=\"tenY\" name=\"lifeSpan\" value=\"tenY\" checked=\"checked\" />\n                  <label for=\"tenY\">10 Year (No Mod D.)</label>\n                </div>\n                <div className={styles.inputitem}>\n                  <input type=\"radio\" id=\"sixty1\" name=\"lifeSpan\" value=\"sixty1\" />\n                  <label for=\"sixty1\">60 Year (With Mod D)</label>\n                </div>\n                <div className={styles.inputitem}>\n                  <input type=\"radio\" id=\"sixty2\" name=\"lifeSpan\" value=\"sixty2\" />\n                  <label for=\"sixty2\">60 Year (No Mod D)</label>\n                </div>\n              </div>\n\n              <div className={styles.inputgroup}>\n                <h3>BIOGENIC CARBON</h3>\n                <div className={styles.inputitem}>\n                  <input type=\"radio\" id=\"yBio\" name=\"biogenicCarbon\" value=\"yBio\" checked=\"checked\" />\n                  <label for=\"yBio\">With Biogenic Carbon</label>\n                </div>\n                <div className={styles.inputitem}>\n                  <input type=\"radio\" id=\"nBio\" name=\"biogenicCarbon\" value=\"nBio\" />\n                  <label for=\"nBio\">No Biogenic Carbon</label>\n                </div>\n              </div>\n            </div>\n\n            {this.state.materials.length > 0 &&\n              <div className={styles.sidebar}>\n                <MaterialList\n                  materials={this.state.materials}\n                  updateSelectedMaterials={this.updateSelectedMaterials.bind(this)}\n                  initialSelectedMaterials={this.state.selectedMaterials}\n                />\n              </div>\n             }\n\n        </form>\n\n        <div className={styles.chartContainer}>\n        {this.state.chartType === \"allImpacts\" && allImpactsDataSelectedMaterialsOnly.length > 0 && <StackedBarChart\n          selectedMaterials={allImpactsDataSelectedMaterialsOnly}\n          allMaterials={this.state.allImpactsData}\n          barHeight={40}\n          xAxisLabel=\"kg CO2eq ??\"\n        />}\n\n        {this.state.chartType === \"GWP\" && this.state.gwpData.length > 0 && <HorizontalBarChart\n          data={this.state.gwpData}\n          height={600}\n          xAxisLabel=\"kg CO2eq\"\n        />}\n        </div>\n\n\n\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"StackedBarChart_container__2dKkZ\",\"tooltipContainer\":\"StackedBarChart_tooltipContainer__3Pank\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"topcontrols\":\"App_topcontrols__k3zXc\",\"inputgroup\":\"App_inputgroup__1uaiG\",\"inputitem\":\"App_inputitem__1lM4C\",\"sidebar\":\"App_sidebar__vAB4e\",\"chartContainer\":\"App_chartContainer__2DarT\"};","module.exports = __webpack_public_path__ + \"static/media/gwp.7df9e12d.csv\";","module.exports = __webpack_public_path__ + \"static/media/allimpacts.766fd663.csv\";"],"sourceRoot":""}